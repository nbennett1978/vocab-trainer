<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nursi's Kelime Trainer ğŸŒ¸</title>

    <!-- PWA / Home Screen -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#6c5ce7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Vocab Trainer">
    <link rel="apple-touch-icon" href="/logo-512.png">

    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen">
        <img src="favicon.png" alt="Nursi's Kelime Trainer" class="splash-logo">
        <h1 class="splash-title">Nursi's Kelime Trainer</h1>
    </div>

    <div class="app-container">
        <!-- Login Screen -->
        <div id="login-screen" class="screen active">
            <div class="login-container">
                <div class="login-logo">
                    <img src="favicon.png" alt="Logo" class="login-logo-img">
                </div>
                <h1 class="login-title">Kelime Trainer</h1>
                <form id="login-form" class="login-form">
                    <div class="form-group">
                        <label for="login-username">KullanÄ±cÄ± AdÄ±</label>
                        <input type="text" id="login-username" class="form-input" placeholder="KullanÄ±cÄ± adÄ±nÄ±zÄ± girin" required autocomplete="username">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Åifre</label>
                        <input type="password" id="login-password" class="form-input" placeholder="Åifrenizi girin" required autocomplete="current-password">
                    </div>
                    <div id="login-error" class="login-error hidden"></div>
                    <button type="submit" class="login-btn">GiriÅŸ Yap</button>
                </form>
            </div>
        </div>

        <!-- Dashboard Screen -->
        <div id="dashboard-screen" class="screen">
            <header class="dashboard-header">
                <div class="header-top">
                    <h1>ğŸŒ¸ Kelime Trainer ğŸŒ¸</h1>
                    <div class="user-info">
                        <span id="user-display" class="user-display"></span>
                        <button id="logout-btn" class="logout-btn" title="Ã‡Ä±kÄ±ÅŸ Yap">ğŸšª</button>
                    </div>
                </div>
                <div class="stats-bar">
                    <div class="stat-item">
                        <span class="stat-icon">â­</span>
                        <span id="total-stars" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">ğŸ”¥</span>
                        <span id="current-streak" class="stat-value">0</span>
                    </div>
                </div>
            </header>

            <!-- Inactivity Message -->
            <div id="inactivity-message" class="inactivity-message hidden"></div>

            <!-- Dashboard Content Grid -->
            <div class="dashboard-content">
                <!-- Progress Overview -->
                <div class="progress-overview">
                    <h2>ğŸ“Š Ä°lerleme Durumu</h2>
                    <div class="leitner-boxes">
                        <div class="leitner-box" data-box="1">
                            <span class="box-label">Kutu 1</span>
                            <span class="box-count" id="box-1-count">0</span>
                            <span class="box-desc">Yeni</span>
                        </div>
                        <div class="leitner-box" data-box="2">
                            <span class="box-label">Kutu 2</span>
                            <span class="box-count" id="box-2-count">0</span>
                            <span class="box-desc">Ã–ÄŸreniliyor</span>
                        </div>
                        <div class="leitner-box" data-box="3">
                            <span class="box-label">Kutu 3</span>
                            <span class="box-count" id="box-3-count">0</span>
                            <span class="box-desc">Ä°yi</span>
                        </div>
                        <div class="leitner-box" data-box="4">
                            <span class="box-label">Kutu 4</span>
                            <span class="box-count" id="box-4-count">0</span>
                            <span class="box-desc">Ã‡ok Ä°yi</span>
                        </div>
                        <div class="leitner-box" data-box="5">
                            <span class="box-label">Kutu 5</span>
                            <span class="box-count" id="box-5-count">0</span>
                            <span class="box-desc">Ã–ÄŸrenildi! âœ¨</span>
                        </div>
                    </div>
                    <div class="mastery-info">
                        <span id="mastered-count">0</span> / <span id="total-words">0</span> kelime tamamen Ã¶ÄŸrenildi ğŸ’–
                    </div>
                </div>

                <!-- Weekly Activity Tracker -->
                <div class="weekly-tracker">
                    <h2>ğŸ“… Bu Hafta</h2>
                    <div id="weekly-boxes" class="weekly-boxes">
                        <!-- 7 day boxes will be rendered by JavaScript -->
                    </div>
                </div>

                <!-- Leaderboard -->
                <div class="leaderboard-section">
                    <h2>ğŸ† SÄ±ralama</h2>
                    <div id="leaderboard" class="leaderboard">
                        <!-- Leaderboard will be rendered by JavaScript -->
                    </div>
                </div>

                <!-- Category Selection -->
                <div class="session-selection">
                    <h2>ğŸ“š Ders SeÃ§</h2>
                    <div id="category-buttons" class="category-buttons">
                        <!-- Category buttons will be rendered by JavaScript -->
                    </div>
                    <div class="special-buttons">
                        <button class="session-btn weak-btn" data-type="weak_words">
                            <span class="btn-icon">ğŸ’ª</span>
                            <span class="btn-text">Zor Kelimeler</span>
                            <span class="btn-desc">Son yanlÄ±ÅŸlar</span>
                        </button>
                        <button class="session-btn review-btn" data-type="review_mastered">
                            <span class="btn-icon">ğŸ”„</span>
                            <span class="btn-text">Tekrar</span>
                            <span class="btn-desc">Kutu 3-5</span>
                        </button>
                    </div>
                </div>

                <!-- Category Evaluation -->
                <div class="category-evaluation">
                    <h2>ğŸ“ˆ Kategori DeÄŸerlendirmesi</h2>
                    <div id="category-progress" class="category-progress-list">
                        <!-- Category rows will be rendered by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Training Screen -->
        <div id="training-screen" class="screen">
            <header class="training-header">
                <button id="back-btn" class="icon-btn">â† Geri</button>
                <div class="progress-indicator">
                    <span id="current-word-num">1</span> / <span id="total-word-num">5</span>
                </div>
                <div id="countdown-timer" class="countdown-timer">
                    <span class="timer-icon">â±ï¸</span>
                    <span id="timer-value" class="timer-value">30</span>
                </div>
                <div class="session-stars">
                    â­ <span id="session-stars">0</span>
                </div>
            </header>

            <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>

            <div class="training-content">
                <!-- Word Stats -->
                <div id="word-stats" class="word-stats">
                    <span class="stats-text"></span>
                </div>

                <!-- Direction Indicator -->
                <div id="direction-indicator" class="direction-indicator">
                    <span class="from-lang">EN</span>
                    <span class="arrow">â†’</span>
                    <span class="to-lang">TR</span>
                </div>

                <!-- Question Card -->
                <div class="question-card">
                    <div id="example-sentence" class="example-sentence"></div>
                    <div class="word-with-audio">
                        <div id="question-word" class="question-word">word</div>
                        <button id="audio-btn" class="audio-btn" title="Hear pronunciation" style="display: none;">
                            ğŸ”Š
                        </button>
                    </div>
                    <div id="category-badge" class="category-badge">verb</div>
                </div>

                <!-- Feedback Area -->
                <div id="feedback" class="feedback hidden">
                    <span class="feedback-text"></span>
                </div>

                <!-- Answer Input -->
                <div class="answer-section">
                    <input type="text" id="answer-input" class="answer-input" placeholder="CevabÄ±nÄ± yaz..." autocomplete="off" autocapitalize="off">
                    <div class="answer-buttons">
                        <button id="dont-know-btn" class="dont-know-btn">Bilmiyorum ğŸ¤·</button>
                        <button id="submit-btn" class="submit-btn">Kontrol Et âœ¨</button>
                    </div>
                </div>

                <!-- Correct Answer Display -->
                <div id="correct-answer" class="correct-answer hidden">
                    <span class="correct-label">DoÄŸru cevap:</span>
                    <span class="correct-text"></span>
                </div>

                <!-- Next Button -->
                <button id="next-btn" class="next-btn hidden">Sonraki â†’</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="results-content">
                <div id="confetti-container" class="confetti-container"></div>

                <h1 class="results-title">ğŸ‰ Tebrikler! ğŸ‰</h1>

                <div class="results-stats">
                    <div class="result-stat">
                        <span class="result-value" id="result-correct">0</span>
                        <span class="result-label">DoÄŸru</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-value" id="result-total">0</span>
                        <span class="result-label">Toplam</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-value" id="result-accuracy">0%</span>
                        <span class="result-label">BaÅŸarÄ±</span>
                    </div>
                </div>

                <div class="stars-earned">
                    â­ <span id="result-stars">0</span> yÄ±ldÄ±z kazandÄ±n!
                </div>

                <!-- New Achievements -->
                <div id="new-achievements" class="new-achievements hidden">
                    <h3>ğŸ† Yeni BaÅŸarÄ±!</h3>
                    <div id="achievement-display"></div>
                </div>

                <!-- All Mastered Message -->
                <div id="all-mastered-message" class="all-mastered-message hidden">
                    <h2>ğŸŒŸ HARÄ°KA! ğŸŒŸ</h2>
                    <p>TÃ¼m kelimeleri Ã¶ÄŸrendin! Sen bir sÃ¼perstarÄ±sÄ±n! ğŸ’–âœ¨</p>
                </div>

                <div class="results-buttons">
                    <button id="back-to-dashboard" class="back-dashboard-btn">Ana Sayfa ğŸ </button>
                    <button id="another-lesson" class="another-lesson-btn">Bir Ders Daha! ğŸ“š</button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="loading-spinner">ğŸŒ¸</div>
            <p>YÃ¼kleniyor...</p>
        </div>

        <!-- No Words Message -->
        <div id="no-words-screen" class="screen">
            <div class="no-words-content">
                <h1>ğŸ“š</h1>
                <h2>Kelime BulunamadÄ±</h2>
                <p>HenÃ¼z Ã¶ÄŸrenilecek kelime eklenmemiÅŸ.</p>
                <p>YÃ¶netici panelinden kelime eklenebilir.</p>
                <button onclick="loadDashboard()" class="back-dashboard-btn">Yenile ğŸ”„</button>
            </div>
        </div>

        <!-- Wrong Answer Popup -->
        <div id="wrong-answer-popup" class="wrong-popup hidden">
            <div class="wrong-popup-content">
                <div class="wrong-popup-icon">ğŸ˜¢</div>
                <h2>YanlÄ±ÅŸ Cevap</h2>
                <div class="wrong-popup-words">
                    <!-- Student's wrong answer (shown first, with character highlighting) -->
                    <div id="student-answer-row" class="wrong-word-row student-answer-row hidden">
                        <span class="wrong-label">Senin cevabÄ±n:</span>
                        <span id="popup-student-answer" class="wrong-value student-wrong-answer"></span>
                    </div>
                    <div id="popup-char-count" class="char-count-row hidden"></div>
                    <div class="wrong-word-row">
                        <span class="wrong-label">ğŸ‡¬ğŸ‡§ English:</span>
                        <span id="popup-english" class="wrong-value correct-answer"></span>
                    </div>
                    <div class="wrong-word-row">
                        <span class="wrong-label">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e:</span>
                        <span id="popup-turkish" class="wrong-value correct-answer"></span>
                    </div>
                </div>
                <p class="wrong-popup-hint">Devam etmek iÃ§in Enter'a bas â</p>
                <button id="close-popup-btn" class="close-popup-btn">Devam Et â†’</button>
            </div>
        </div>
    </div>

    <script src="js/confetti.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
